<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Champlin | EOP - Historic Preservation</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.css" rel="stylesheet">

    <style>
        body { margin: 0; padding: 0; font-family: 'Helvetica Neue', Arial, sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }

        /* Customizing the Popups */
        .mapboxgl-popup-content {
            padding: 15px;
            max-width: 250px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .popup-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        .popup-title { font-weight: bold; font-size: 1.1em; margin-bottom: 4px; color: #2c3e50; }
        .popup-status { font-size: 0.8em; text-transform: uppercase; letter-spacing: 1px; color: #7f8c8d; }
    </style>
</head>
<body>

<div id="map"></div>

<script>
    // 1. YOUR CREDENTIALS
    mapboxgl.accessToken = 'pk.eyJ1Ijoiam9leW1hZGFqIiwiYSI6ImNtazV5eWJyYzBvYm8zZXB2cHdhNWRmOTgifQ.B5lHozl7Lf17UWwTDbdSaQ';
    
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/joeymadaj/cmk6zd8om000901qs68p8aig4', // Change to your custom Style URL
        center: [-95.7129, 37.0902], // Starting center [lng, lat] (Midwest/US)
        zoom: 4
    });

    // 2. YOUR DATA (GeoJSON Format)
    // You can move this to an external file later.
    const projectData = {
        "type": "FeatureCollection",
        "features": [
            {
                "type": "Feature",
                "properties": {
                    "title": "Fayette County Courthouse",
                    "status": "completed",
                    "description": "Comprehensive restoration of the 1899 Romanesque Revival exterior.",
                    "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d1/Fayette_County_Courthouse_Lexington.jpg/300px-Fayette_County_Courthouse_Lexington.jpg"
                },
                "geometry": { "type": "Point", "coordinates": [-84.4970, 38.0464] }
            },
            {
                : "Feature",
                "properties": {
                    "title": "Ongoing Union Station Project",
                    "status": "ongoing",
                    "description": "Structural reinforcement and interior preservation.",
                    "image": "https://via.placeholder.com/300x150?text=Project+Photo"
                },
                "geometry": { "type": "Point", "coordinates": [-94.5857, 39.0853] }
            }
        ]
    };

    map.on('load', () => {
        // Add the data to the map
        map.addSource('projects', {
            type: 'geojson',
            data: projectData
        });

        // Add the Dots (The Layer)
        map.addLayer({
            id: 'project-dots',
            type: 'circle',
            source: 'projects',
            paint: {
                // COLOR CODING LOGIC
                'circle-color': [
                    'match',
                    ['get', 'status'],
                    'completed', '#2ecc71', // Green
                    'ongoing', '#f1c40f',    // Yellow
                    'needs-work', '#e74c3c', // Red
                    'precedent', '#3498db',  // Blue
                    '#ccc'                   // Default Gray
                ],
                'circle-radius': 8,
                'circle-stroke-width': 2,
                'circle-stroke-color': '#ffffff',
                'circle-blur': 0.5
            }
        });

        // HOVER POPUP LOGIC
        const popup = new mapboxgl.Popup({
            closeButton: false,
            closeOnClick: false
        });

        map.on('mouseenter', 'project-dots', (e) => {
            map.getCanvas().style.cursor = 'pointer';

            const coordinates = e.features[0].geometry.coordinates.slice();
            const { title, description, status, image } = e.features[0].properties;

            // Define the HTML inside the popup
            const content = `
                <img class="popup-image" src="${image}">
                <div class="popup-status">${status}</div>
                <div class="popup-title">${title}</div>
                <div class="popup-desc">${description}</div>
            `;

            popup.setLngLat(coordinates).setHTML(content).addTo(map);
        });

        map.on('mouseleave', 'project-dots', () => {
            map.getCanvas().style.cursor = '';
            popup.remove();
        });
    });
</script>

</body>

</html>







