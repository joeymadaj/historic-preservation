<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Champlin | EOP - Historic Preservation</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.css" rel="stylesheet">

    <style>
        .title-box {
    position: absolute;
    top: 20px;
    left: 20px;
    background-color: rgba(255, 255, 255, 0.8);
    padding: 15px 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    border-left: 5px solid #2c3e50; /* A nice architectural accent line */
    z-index: 1;
    max-width: 400px;
}

.title-box h1 {
    margin: 0;
    font-family: 'Verdana', sans-serif; /* Or your firm's font */
    font-size: 20px;
    color: #2c3e50;
    letter-spacing: 0.5px;
}
        body { margin: 0; padding: 0; font-family: 'Helvetica Neue', Arial, sans-serif; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }

        /* Customizing the Popups */
        .mapboxgl-popup-content {
            padding: 15px;
            max-width: 250px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .popup-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 8px;
        }
        .popup-title { font-weight: bold; font-size: 1.1em; margin-bottom: 4px; color: #2c3e50; }
        .popup-status { font-size: 0.8em; text-transform: uppercase; letter-spacing: 1px; color: #7f8c8d; }
        .legend {
    background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white */
    border-radius: 8px;
    bottom: 30px; /* Distance from bottom */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    padding: 15px;
    position: absolute;
    right: 10px; /* Distance from right side */
    z-index: 1;
    border: 1px solid #ddd;
    min-width: 120px;
}

.legend h4 {
    margin: 0 0 10px;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #333;
}

.legend div span {
    border-radius: 50%;
    display: inline-block;
    height: 10px;
    margin-right: 10px;
    width: 10px;
    border: 1px solid #fff; /* Makes the colors pop */
}
        /* Style for the link in the title box */
#about-btn {
    font-size: 11px;
    color: #3498db;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: bold;
}

#about-btn:hover { text-decoration: underline; }

hr { border: 0; border-top: 1px solid #eee; margin: 10px 0; }

/* The Modal Background */
.modal {
    display: none; 
    position: fixed;
    z-index: 10; 
    left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.5); /* Dim the map */
    backdrop-filter: blur(3px); /* Blur the map behind the modal */
}

/* The Modal Content Box */
.modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    padding: 30px;
    border-radius: 8px;
    width: 400px;
    box-shadow: 0 5px 30px rgba(0,0,0,0.3);
    font-family: 'Georgia', serif;
    line-height: 1.6;
}

.close-modal {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-modal:hover { color: #000; }
    </style>
</head>
<body>

<div id="map-title" class="title-box">
    <h1>Midwest Heritage Tracker</h1>
    <p>Historic Preservation & Restoration Portfolio</p>
    <hr>
    <a href="#" id="about-btn">About this project</a>
</div>

<div id="about-modal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Our Mission</h2>
        <p>Your firm's mission statement goes here. For over X years, we have been dedicated to the meticulous preservation of the Midwest's architectural legacy...</p>
        <p>This interactive map tracks our ongoing efforts to document and restore sites of historical significance.</p>
    </div>
</div>
<div id="state-legend" class="legend">
    <h4>Project Status</h4>
    <div><span style="background-color: #2ecc71"></span>Completed</div>
    <div><span style="background-color: #f1c40f"></span>Ongoing</div>
    <div><span style="background-color: #e74c3c"></span>Needs Work</div>
    <div><span style="background-color: #3498db"></span>Precedent</div>
</div>
<script>
    // 1. YOUR CREDENTIALS
    mapboxgl.accessToken = 'pk.eyJ1Ijoiam9leW1hZGFqIiwiYSI6ImNtazV5eWJyYzBvYm8zZXB2cHdhNWRmOTgifQ.B5lHozl7Lf17UWwTDbdSaQ';
    
    const map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/joeymadaj/cmk6zd8om000901qs68p8aig4', // Change to your custom Style URL
        center: [-95.7129, 37.0902], // Starting center [lng, lat] (Midwest/US)
        zoom: 4
    });

map.on('load', () => {
        // 1. Fetch the data from your external file
        map.addSource('projects', {
            type: 'geojson',
            data: './projects.json' 
        });

        // 2. Add the Dots Layer
        map.addLayer({
            id: 'project-dots',
            type: 'circle',
            source: 'projects',
            paint: {
                'circle-color': [
                    'match',
                    ['get', 'status'],
                    'completed', '#2ecc71',
                    'ongoing', '#f1c40f',
                    'needs-work', '#e74c3c',
                    'precedent', '#3498db',
                    '#ccc'
                ],
                'circle-radius': 8,
                'circle-stroke-width': 2,
                'circle-stroke-color': '#ffffff',
                'circle-blur': 0.1
            }
        });

        // 3. HOVER POPUP LOGIC
        const popup = new mapboxgl.Popup({
            closeButton: false,
            closeOnClick: false
        });

        map.on('mouseenter', 'project-dots', (e) => {
            map.getCanvas().style.cursor = 'pointer';

            const coordinates = e.features[0].geometry.coordinates.slice();
            const { title, description, status, image } = e.features[0].properties;

            const content = `
                <img class="popup-image" src="${image}">
                <div class="popup-status">${status}</div>
                <div class="popup-title">${title}</div>
                <div class="popup-desc">${description}</div>
            `;

            popup.setLngLat(coordinates).setHTML(content).addTo(map);
        });

        map.on('mouseleave', 'project-dots', () => {
            map.getCanvas().style.cursor = '';
            popup.remove();
        });

    }); // This closes the map.on('load')
    const modal = document.getElementById("about-modal");
const btn = document.getElementById("about-btn");
const span = document.getElementsByClassName("close-modal")[0];

// Open modal on click
btn.onclick = function(e) {
    e.preventDefault();
    modal.style.display = "block";
}

// Close modal on "X" click
span.onclick = function() {
    modal.style.display = "none";
}

// Close modal if user clicks anywhere outside of the box
window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>

</body>

</html>

















